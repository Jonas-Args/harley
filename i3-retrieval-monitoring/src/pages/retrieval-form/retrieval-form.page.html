<ion-header>
  <ion-navbar>
    <button button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Retrieval Form</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <form [formGroup]="formPanel">
    <ion-item>
      <ion-label>
        <p>Year:</p>
      </ion-label>
      <ion-input formControlName="year" type="text" placeholder="YYYY"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>
        <p>Period:</p>
      </ion-label>
      <ion-select formControlName="period" ok-text="Okay" cancel-text="Dismiss">
        <ion-option *ngFor="let type of ['01','02','03','04','05','06','07','08','09','10','11','12','13']"
          [value]="type">{{ type }}</ion-option>
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label>
        <p>Week:</p>
      </ion-label>
      <ion-select formControlName="week" ok-text="Okay" cancel-text="Dismiss">

        <ion-option *ngFor="let type of ['1','2','3','4']" [value]="type">{{ type }}</ion-option>
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label>
        <p>Period Code:</p>
      </ion-label>
      <ion-input formControlName="period_code" type="text" disabled="true" placeholder="YYYY.PP.W"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label>
        Date Retrieved:
      </ion-label>
      <ion-datetime displayFormat="YYYY-MM-D" pickerFormat="YYYY-MM-D" formControlName="date_retrieved"></ion-datetime>
    </ion-item>
    <ion-grid>
      <ion-row>
        <ion-col size="12">
          <ion-item>
            <ion-label>
              Panel Code:
            </ion-label>
            <ion-input formControlName="panel_code" type="text"></ion-input>
          </ion-item>
          <button ion-button full (click)="scan()">SCAN</button>
        </ion-col>
        <!-- <ion-col size="4">
          <button ion-button full (click)="scan()">SCAN</button>
        </ion-col> -->
      </ion-row>
    </ion-grid>
    <ion-grid>
      <ion-row>
        <ion-col size="6">
          <button ion-button full (click)="clear()">CLEAR</button>
        </ion-col>
        <ion-col size="6">
          <button ion-button full (click)="search(formPanel.value)">
            SEARCH
          </button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
  <ion-list>
    <ng-container *ngFor="let request of requests; let i = index">
      <!-- <ion-item (click)="editRequest(request.Id)"> -->
      <ion-item (click)="moveToIrf(request)">
        <ion-col *ngIf="request?.stored == 'true'">
          <ion-icon name="cloud-done"></ion-icon>
        </ion-col>
        <ion-col>{{i+1}}</ion-col>
        <ion-col>{{request.period_code}}</ion-col>
        <ion-col>{{request.panel_code}}</ion-col>
        <!-- add field here -->
      </ion-item>
      <ion-col (click)="removeRequest(request.rowId); $event.stopPropagation()">remove</ion-col>
    </ng-container>
  </ion-list>
</ion-content>